/** 
 * behaviorify - Converts .bt files into JavaScript files for consumption by the Behavior Tree Factory.
 * @version v1.0.0
 * Copyright (c) 2016, Jibo, Inc. All rights reserved.
 * All use of the Jibo SDK is subject to the Jibo SDK End User License Agreement (EULA) 
 * distributed herewith.  If you did not receive a copy of the EULA, you may view a
 * copy at https://developers.jibo.com/license.
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.behaviorify=e()}}(function(){return function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n?n:e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){return d["default"].readFileSync(a["default"].resolve(w,e),"utf8")}function i(t,n){for(n=Object.assign({babel:!0,updateOnly:!1},n||{}),t.meta=t.meta||{version:0};t.meta.version<P;)E["default"]["version"+t.meta.version](t),t.meta.version++;if(n.updateOnly)return t;for(var o,i,s,a,u=p["default"].parse(r("templates/tree.js")),d=new g["default"](u.body[u.body.length-1].expression.right.body.body[0].argument.properties),l=Object.keys(t),f=0;f<l.length;f++){var v=l[f];if("meta"!=v){var y=t[v],m=!1,b=new g["default"];if(b.addKeyValue("id",(0,S["default"])(v)),y.name&&b.addKeyValue("name",(0,S["default"])(y.name)),y.parent&&b.addKeyValue("parent",(0,S["default"])(y.parent)),y["asset-pack"]&&b.addKeyValue("asset-pack",(0,S["default"])(y["asset-pack"])),b.addKeyValue("class",(0,S["default"])(y["class"])),y.children){for(o=new h["default"],s=0;s<y.children.length;s++)o.push((0,S["default"])(y.children[s]));b.addKeyValue("children",o.expression)}if(y.skipped&&b.addKeyValue("skipped",(0,S["default"])(y.skipped)),y.decorators){for(o=new h["default"],s=0;s<y.decorators.length;s++)o.push((0,S["default"])(y.decorators[s]));b.addKeyValue("decorators",o.expression)}if(y.options){i=new g["default"];for(s in y.options)if(a=y.options[s],Array.isArray(a)&&(a=y.options[s]=a.join("\n")),"string"==typeof a&&(0===a.indexOf("function")||a.indexOf("=>")>=0)){m=!0;try{var x=a;n.babel||(x="function f"+x.replace(/\s?\=\>/,""));var _=p["default"].parse(x);_="ExpressionStatement"===_.body[0].type?_.body[0].expression:_.body[0],i.addKeyValue(s,_)}catch(j){console.error("Syntax error in behavior id "+v+". See below:"),console.error(a)}}else i.addKeyValue(s,(0,S["default"])(a));b.addKeyValue("options",i.expression)}m?d.addKeyValue(v,(0,O["default"])(b.expression)):d.addKeyValue(v,b.expression)}}var w=c["default"].generate(u);if(n.babel){var M=e("babel-core");w=M.transform(w).code}return w}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var s=e("path"),a=o(s),u=e("fs"),d=o(u),l=e("escodegen"),c=o(l),f=e("esprima"),p=o(f),v=e("find-root"),y=o(v),m=e("./expressions/ArrayExpression"),h=o(m),b=e("./expressions/ObjectExpression"),g=o(b),x=e("./expressions/CallExpression"),O=o(x),_=e("./expressions/LiteralExpression"),S=o(_),j=e("./versions"),E=o(j);const P=1;Object.assign||(Object.assign=e("object-assign"));const w=(0,y["default"])(__dirname)},{"./expressions/ArrayExpression":4,"./expressions/CallExpression":5,"./expressions/LiteralExpression":6,"./expressions/ObjectExpression":7,"./versions":9,"babel-core":void 0,escodegen:void 0,esprima:void 0,"find-root":void 0,fs:void 0,"object-assign":void 0,path:void 0}],2:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){var e,t=process.argv.slice(2);t.length||(console.error("Second argument must be files to ignore"),process.exit(1)),("-u"==t[0]||"--update"==t[0])&&t.length>1?(e=t.slice(1),e.forEach(function(e){var t=u["default"].resolve(e),n=s["default"].readFileSync(t,"utf8"),o=JSON.parse(n);(0,l["default"])(o,{updateOnly:!0}),s["default"].writeFileSync(t,JSON.stringify(o,null,"  ")),console.log(" -> Updated %s",e)}),process.exit(0)):t.length&&(e=t,e.forEach(function(e){var t=u["default"].resolve(e),n=s["default"].readFileSync(t,"utf8"),o=JSON.parse(n),r=(0,l["default"])(o);console.log(r)}),process.exit(0)),console.error("Invalid command."),process.exit(1)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var i=e("fs"),s=o(i),a=e("path"),u=o(a),d=e("./behaviorify"),l=o(d)},{"./behaviorify":1,fs:void 0,path:void 0}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={Blink:[],ExecuteScript:["exec"],ExecuteScriptAsync:["exec"],Listen:["getOptions","rule","onResult"],ListenEmbedded:["rule","onResult"],ListenJs:["getOptions","getRule","onResult"],LookAt:["getTarget","isContinuous","config"],Null:[],Parallel:["succeedOnOne","children"],PlayAnimation:["animPath","config"],PlayAudio:["audioPath"],Random:["children"],ReadBarcode:["onBarcode"],Sequence:["children"],Subtree:["behaviorPath","getNotepad","onResult"],SubtreeJs:["getFileName","getNotepad","onResult"],Switch:["children"],TakePhoto:["resolution","onPhoto","noDistortion"],TextToSpeech:["words","onWord"],TextToSpeechJs:["getWords","onWord"],TimeoutJs:["getTime"],Case:["conditional"],FailOnCondition:["init","conditional"],StartOnAnimEvent:["eventName","onReceived"],StartOnCondition:["init","conditional"],StartOnEvent:["eventName","onEvent"],SucceedOnCondition:["init","conditional"],SucceedOnEmbedded:["rule","onResult"],SucceedOnEvent:["eventName","onEvent"],SucceedOnListen:["getOptions","rule","onResult"],SucceedOnListenJs:["getOptions","getRule","onResult"],TimeoutFail:["timeout"],TimeoutSucceed:["timeout"],TimeoutSucceedJs:["getTime"],WhileCondition:["init","conditional"]}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class o{constructor(){this.expression={type:"ArrayExpression",elements:[]}}push(e){this.expression.elements.push(e)}}n["default"]=o},{}],5:[function(e,t,n){"use strict";function o(e){return{type:"CallExpression",callee:{type:"FunctionExpression",id:null,params:[{type:"Identifier",name:"self"}],defaults:[],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:e}]},rest:null,generator:!1,expression:!1},arguments:[{type:"ObjectExpression",properties:[]}]}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],6:[function(e,t,n){"use strict";function o(e){return{type:"Literal",value:e,raw:'"'+e+'"'}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class o{constructor(e){this.expression={type:"ObjectExpression",properties:e?e:[]}}addKeyValue(e,t){this.expression.properties.push({type:"Property",key:{type:"Literal",value:e,raw:'"'+e+'"'},value:t,kind:"init",method:false,shorthand:false})}}n["default"]=o},{}],8:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){e.extensions[".bt"]=function(e,n){var o=i["default"].readFileSync(n,"utf8"),r=JSON.parse(o),s=(0,a["default"])(r,t);return e._compile(s,n)}};var r=e("fs"),i=o(r),s=e("./behaviorify"),a=o(s)},{"./behaviorify":1,fs:void 0}],9:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./version0"),i=o(r);n["default"]={version0:i["default"]}},{"./version0":10}],10:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){function n(t){var n={},o={},r=t+"/schema?(s)/*.json",s=l[r]||i["default"].sync(r);if(l[r]||(l[r]=s),!s.length)return n;s.forEach(function(t){var n=l[t]||e(t);if(void 0===n.meta){for(var r in n){var i=n[r],s=[];i.meta&&(i.meta.forEach(function(e,t){e.type=i.args[t],s.push(e)}),delete i.meta,delete i.args),i.options=s}n.meta={version:1}}l[t]||(l[t]=n),Object.assign(o,n)});for(var a in o)if("meta"!=a){var u=o[a];if(u.options){var d=[];u.options.forEach(function(e){d.push(e.field)}),n[a]=d}}return n}function o(){var t={},o=process.cwd()+"/node_modules/*/package.json",r=l[o]||i["default"].sync(o);return l[o]||(l[o]=r),r.length?void r.forEach(function(t){var o=e(t);if(o.jibo){var r=a["default"].dirname(t);Object.assign(s.project,n(r))}}):t}function r(e,t){for(var n={},o=0;o<e.length;o++)n[t[o]]=e[o];return n}var s={core:d["default"],project:n(process.cwd())};o();for(var u in t)if("meta"!=u){var c=t[u];s.core[c["class"]]?c.options=r(c.args,s.core[c["class"]]):s.project[c["class"]]?c.options=r(c.args,s.project[c["class"]]):(console.error("behaviorify -> Warning: Cannot upgrade arguments in class '%s'. Please update Schema and resave .bt file.",c["class"]),c.options={}),delete c.args}return t};var r=e("glob"),i=o(r),s=e("path"),a=o(s),u=e("../core"),d=o(u),l={}},{"../core":3,glob:void 0,path:void 0}],11:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./behaviorify"),i=o(r),s=e("./command"),a=o(s),u=e("./core"),d=o(u),l=e("./register"),c=o(l);i["default"].command=a["default"],i["default"].core=d["default"],i["default"].register=c["default"],n["default"]=i["default"]},{"./behaviorify":1,"./command":2,"./core":3,"./register":8}]},{},[11])(11)});